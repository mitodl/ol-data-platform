---
version: 2

models:
- name: int__micromasters__users
  description: Intermediate model of Users in MicroMasters
  columns:
  - name: user_id
    description: int, sequential ID representing a user in MicroMasters
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_username
    description: str, unique string to identify user
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_full_name
    description: str, user's full name
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_email
    description: str, user email associated with user account (not unique)
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_joined_on
    description: timestamp, specifying when a user account was initially created
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_last_login
    description: timestamp, specifying when a user last logged in
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_address_country
    description: str, country code for the user's address
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_is_active
    description: boolean, indicating if user is active or not
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_mitxonline_username
    description: str, username in mitxonline
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_edxorg_username
    description: str, username in edx.org
    tests:
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 10
  - dbt_expectations.expect_table_row_count_to_equal_other_table:
      compare_model: ref('stg__micromasters__app__postgres__auth_user')
