---
version: 2

models:
- name: __micromasters__users
  description: MicroMasters users according to the micromasters database. Does not
    include users who have a login on mitxonline only
  columns:
  - name: user_id
    description: int, sequential ID representing a user in MicroMasters
    tests:
    - unique
    - not_null
  - name: user_username
    description: str, unique string to identify user
    tests:
    - unique
    - not_null
  - name: user_full_name
    description: str, user's full name
  - name: user_email
    description: str, user email associated with user account (not unique)
    tests:
    - not_null
  - name: user_joined_on
    description: timestamp, specifying when a user account was initially created
  - name: user_last_login
    description: timestamp, specifying when a user last logged in
  - name: user_is_active
    description: boolean, indicating if user is active or not
  - name: user_profile_id
    description: int, sequential ID representing a user profile in MicroMasters
  - name: user_first_name
    description: str, first name on user profile
  - name: user_last_name
    description: str, last name on user profile
  - name: user_birth_date
    description: timestamp, user's date of birth
  - name: user_address_country
    description: str, country where user lives in
  - name: user_address_city
    description: str, city where user lives in
  - name: user_address_state_or_territory
    description: str,  state or territory where user lives in
  - name: user_address_postal_code
    description: str, postal code where user lives in
  - name: user_street_address
    description: str, street address where user lives in
  - name: user_highest_education
    description: str, user's level of education
    tests:
    - accepted_values:
        values: ["Doctorate", "Master''s or professional degree", "Bachelor''s degree",
          "Associate degree", "Secondary/high school", "Junior secondary/junior high/middle\
            \ school", "Elementary/primary school", "No formal education", "Other\
            \ education", "Doctorate in science or engineering", "Doctorate in another\
            \ field"]
  - name: user_gender
    description: str, user gender (could be blank)
    tests:
    - accepted_values:
        values: ['Male', 'Female', 'Other/Prefer Not to Say']
  - name: user_profile_is_filled_out
    description: boolean, whether user filled out the profile
  - name: user_email_is_optin
    description: boolean, whether user has opted to receive email
  - name: user_nationality
    description: str, user's nationality (stored as country code)
  - name: user_employer
    description: str, user's employer on edx.org
  - name: user_phone_number
    description: str, user's phone number
  - name: user_job_title
    description: str, user's job title on edx.org
  - name: user_account_privacy
    description: str, whether user account is "Public to everyone" (public), "Public
      to logged in users" (public_to_mm) or "Private" (private)
    tests:
    - accepted_values:
        values: ['Public to everyone', 'Public to logged in users', 'Private']
  - name: user_preferred_language
    description: str, user's preferred language
  - name: user_mailing_address
    description: str, user's mailing address on edx.org
  - name: user_is_verified
    description: boolean, whether the user is a verified MicroMasters user (currently
      false to all users on production)
  - name: user_has_agreed_to_terms_of_service
    description: boolean, whether the user has agreed to term of service
  - name: user_language_proficiencies
    description: str, JSON string of user's language proficiencies on edx.org
  - name: user_profile_parental_consent_is_required
    description: boolean, user profile requires parental consent on edx.org
  - name: user_bio
    description: str, user's biography on edx.org
  - name: user_about_me
    description: str, about me in user profile
  - name: user_edx_name
    description: str, user's full name on edx.org
  - name: user_edx_goals
    description: str, user's personal goal on edx.org
  - name: user_mitxonline_username
    description: str, username in mitxonline
  - name: user_edxorg_username
    description: str, username in edx.org. For the very small number of users with
      multiple edx usernames, this is the username with the latest logins
  tests:
  - dbt_expectations.expect_table_row_count_to_equal_other_table:
      compare_model: ref('stg__micromasters__app__postgres__auth_user')

- name: __micromasters_program_certificates_dedp_from_micromasters
  description: DEDP program certificate earners according to the micromasters database
  columns:
  - name: user_edxorg_username
    description: str, The username of the learner on the edX platform
    tests:
    - not_null
  - name: user_email
    description: str, The email address of the learner on the edX platform
    tests:
    - not_null
  - name: micromasters_program_id
    description: int, sequential ID representing a program in MicroMasters
    tests:
    - not_null
  - name: program_title
    description: str, title of the program
    tests:
    - not_null
  - name: user_edxorg_id
    description: int, Numerical user ID of a learner on the edX platform
  - name: user_gender
    description: str, user's gender from edxorg - blank means user did not specify
      a gender. Null means this student signed up before this information was collected
    tests:
    - accepted_values:
        values: ['Male', 'Female', 'Other/Prefer Not to Say', '', null]
  - name: user_country
    description: str, Country provided by the user on the edX platform
  - name: user_address_city
    description: str, city where user lives in, collected from the micromasters database
  - name: user_first_name
    description: str, first from the micromasters profile
  - name: user_last_name
    description: str, last name from the micromasters profile
  - name: user_year_of_birth
    description: str, user's birth year from the profile in the micromasters database
  - name: user_address_postal_code
    description: str, postal code where user lives in from the profile in micromasters
  - name: user_street_address
    description: str, street address where user lives in from the profile in the micromasters
      database
  - name: user_address_state_or_territory
    description: str,  state or territory where user lives in from the profile in
      the micromasters database
  - name: user_full_name
    description: str, The full name of the user on the edX platform
  - name: program_completion_timestamp
    description: timestamp, timestamp of the course certificate that completed the
      program
    tests:
    - not_null
  - name: micromasters_user_id
    description: str, user id in the micromasters database

- name: __micromasters_program_certificates_dedp_from_mitxonline
  description: DEDP program certificate earners according to the mitxonline database
  columns:
  - name: user_edxorg_username
    description: str, The username of the learner on the edX platform
  - name: user_email
    description: str, The email address of the learner on the edX platform
    tests:
    - not_null
  - name: micromasters_program_id
    description: int, sequential ID representing a program in MicroMasters
    tests:
    - not_null
  - name: program_title
    description: str, title of the program
    tests:
    - not_null
  - name: user_edxorg_id
    description: int, Numerical user ID of a learner on the edX platform
  - name: user_gender
    description: str, user's gender from edxorg - blank means user did not specify
      a gender. Null means this student signed up before this information was collected
    tests:
    - accepted_values:
        values: ['Male', 'Female', 'Other/Prefer Not to Say', '', null]
  - name: user_country
    description: str, Country provided by the user on the edX platform
  - name: user_address_city
    description: str, city where user lives in, collected from the micromasters database
  - name: user_first_name
    description: str, first from the micromasters profile
  - name: user_last_name
    description: str, last name from the micromasters profile
  - name: user_year_of_birth
    description: str, user's birth year from the profile in the micromasters database
  - name: user_address_postal_code
    description: str, postal code where user lives in from the profile in micromasters
  - name: user_street_address
    description: str, street address where user lives in from the profile in the micromasters
      database
  - name: user_address_state_or_territory
    description: str,  state or territory where user lives in from the profile in
      the micromasters database
  - name: user_full_name
    description: str, The full name of the user on the edX platform
  - name: program_completion_timestamp
    description: timestamp, timestamp of the course certificate that completed the
      program
    tests:
    - not_null
  - name: micromasters_user_id
    description: str, user id in the micromasters database

- name: __micromasters_program_certificates_non_dedp
  description: Non DEDP program certificate earners. Calculated from joining edxorg
    course certificate records to the program requirements from the micromasters database
  columns:
  - name: user_edxorg_username
    description: str, The username of the learner on the edX platform
    tests:
    - not_null
  - name: user_email
    description: str, The email address of the learner on the edX platform
    tests:
    - not_null
  - name: micromasters_program_id
    description: int, sequential ID representing a program in MicroMasters
    tests:
    - not_null
  - name: program_title
    description: str, title of the program
    tests:
    - not_null
  - name: user_edxorg_id
    description: int, Numerical user ID of a learner on the edX platform
    tests:
    - not_null
  - name: user_gender
    description: str, user's gender from edxorg - blank means user did not specify
      a gender. Null means this student signed up before this information was collected
    tests:
    - accepted_values:
        values: ['Male', 'Female', 'Other/Prefer Not to Say', '', null]
  - name: user_country
    description: str, Country provided by the user on the edX platform
  - name: user_address_city
    description: str, city where user lives in, collected from the micromasters database
  - name: user_first_name
    description: str, first from the micromasters profile
  - name: user_last_name
    description: str, last name from the micromasters profile
  - name: user_year_of_birth
    description: str, user's birth year from the profile in the micromasters database
  - name: user_address_postal_code
    description: str, postal code where user lives in from the profile in micromasters
  - name: user_street_address
    description: str, street address where user lives in from the profile in the micromasters
      database
  - name: user_address_state_or_territory
    description: str,  state or territory where user lives in from the profile in
      the micromasters database
  - name: user_full_name
    description: str, The full name of the user on the edX platform
  - name: program_completion_timestamp
    description: timestamp, timestamp of the course certificate that completed the
      program
  - name: micromasters_user_id
    description: str, user id in the micromasters database
