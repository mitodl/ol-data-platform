---
version: 2

models:
- name: int__combined__users
  description: Intermediate model for users from different platforms
  columns:
  - name: platform
    description: string, application where the data is from
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
    - accepted_values:
        values: '{{ var("platforms") }}'
  - name: user_id
    description: int, user ID on the corresponding platform
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_username
    description: string, username on the corresponding platform
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_email
    description: string, user email on the corresponding platform
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 4

- name: int__combined__courserun_enrollments
  description: Intermediate model for user course enrollments from different platforms
  columns:
  - name: platform
    description: string, application where the data is from
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
    - accepted_values:
        values: '{{ var("platforms") }}'
  - name: courserunenrollment_is_active
    description: boolean, indicating whether enrollment is active on the corresponding
      platform
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: user_id
    description: int, user ID on the corresponding platform
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: courserun_id
    description: int, internal course ID on the corresponding platform
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: courserunenrollment_created_on
    description: timestamp, specifying when an enrollment was initially created on
      the corresponding platform
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: courserunenrollment_enrollment_mode
    description: string, enrollment mode for user on the corresponding platform
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserunenrollment_enrollment_status
    description: string, enrollment status for users whose enrollment changed on the
      corresponding platform
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserun_title
    description: string, title of the course run on the corresponding platform
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: courserun_readable_id
    description: str, unique string to identify a course run on the corresponding
      platform
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_username
    description: string, username on the corresponding platform
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_email
    description: string, user email on the corresponding platform
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 11
