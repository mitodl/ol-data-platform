---
version: 2

models:
- name: int_mitxonline__enrollments
  description: Intermediate model of enrollments in MITx Online.
  columns:
  - name: id
    description: id for enrollment
    tests:
    - not_null
  - name: active
    description: boolean specifying whether the user is active in this course run
  - name: user_id
    description: id for the enrolling user
  - name: created_on
    description: timestamp specifying when the enrollment happened
  - name: courseware_url_path
    description: url for course where the user is enrolled
  - name: course_title
    description: title of the course where the user is enrolled
  - name: username
    description: str, name chosen by user
  - name: user_email
    description: str, email associated with the user account

- name: int__mitxonline__course_runs
  description: ""
  columns:
  - name: id
    description: ""
  - name: title
    description: ""
  - name: end_date
    description: ""
  - name: start_date
    description: ""
  - name: courseware_id
    description: ""
  - name: courseware_url_path
    description: ""

- name: int__mitxonline__users
  description: denormalized mitxonline users
  columns:
  - name: id
    description: int, primary key
    tests:
    - unique
    - not_null
  - name: username
    description: string, username
  - name: full_name
    description: string, full name
  - name: user_email
    description: int, email
  - name: is_open_learning_staff
    description: boolean, union of is_superuser and is_staff in the user table. If
      true, the user is definitely staff, but other users may be staff as well
  - name: user_joined_on_utc
    description: date, user join date
  - name: last_login_utc
    description: date, user last log in
  - name: is_moderator
    description: boolean, if true the user is a moderator
  - name: is_cms_editor
    description: boolean, if true the user is an editor
  - name: user_address_country
    description: string, country code for the user's address
  - name: first_name
    description: string, first name
  - name: last_name
    description: string, last name
  tests:
  - dbt_utils.equal_rowcount:
      compare_model: ref('stg__mitxonline__app__postgres__users_user')
