---
version: 2

models:
- name: int__edxorg__courserun_certificates
  description: Intermediate model for course run certificates from edx.org
  columns:
  - name: user_id
    description: int, Numerical user ID of a learner on the edX platform
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: courserun_readable_id
    description: str, The canonical ID of the course run in the format as {org}/{course}/{run}.
      This is old format and could be different from courses in MITxOnline or MicroMasters
      that use new format
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: courseruncertificate_status
    description: str, one of downloadable, notpassing, audit_passing, unavailable,
      audit_notpassing where downloadable should = earned
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courseruncertificate_created_on
    description: timestamp, timestamp when certificate was generated (if applicable)
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserun_title
    description: str, The title of the course run
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 5

- name: int__edxorg__courserun_enrollments
  description: Intermediate model for course run enrollments from edx.org
  columns:
  - name: user_id
    description: int, Numerical user ID of a learner on the edX platform
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: courserun_readable_id
    description: str, The canonical ID of the course run in the format as {org}/{course}/{run}.
      This is old format and could be different from courses in MITxOnline or MicroMasters
      that use new format
    tests:
    - dbt_expectations.expect_column_to_exist
    - not_null
  - name: user_username
    description: str, username of a learner on the edX platform (some blank from source)
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserunenrollment_created_on
    description: timestamp, timestamp of user's enrollment in the course
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserunenrollment_enrollment_mode
    description: str, enrollment mode, e.g. honor, audit, verified
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserunenrollment_is_active
    description: boolean, indicating if enrollment is active or not
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: courserun_title
    description: str, The title of the course run
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 7
  - dbt_expectations.expect_table_row_count_to_equal_other_table:
      compare_model: ref('stg__edxorg__bigquery__mitx_person_course')
