---
version: 2

models:
- name: int__openedx_mitxpro__users
  description: MIT xPRO open edx Users
  columns:
  - name: user_id
    description: int, Numerical user ID on MIT xPro open edx platform
    tests:
    - not_null
    - unique
  - name: user_username
    description: str, username of the user on MIT xPro open edx platform
    tests:
    - not_null
    - unique
  - name: user_email
    description: str, email address of the user on MIT xPro open edx platform
    tests:
    - not_null
    - unique
  - name: user_last_login
    description: timestamp, last timestamp when user logged into the MIT xPro open
      edX platform
    tests:
    - not_null
  - name: user_joined_on
    description: timestamp, timestamp when user's account was created on MIT xPro
      open edx platform
    tests:
    - not_null
  - name: mitxpro_user_id
    description: int, Numerical user ID on MIT xPro application website
    tests:
    - not_null
    - unique
    - relationships:
        to: ref('int__mitxpro__users')
        field: user_id

- name: int__openedx_mitxpro__user_courseactivities
  description: MIT xPro open edx user activities within a course from tracking events
  columns:
  - name: user_id
    description: int, Numerical user ID of a learner on MIT xPro open edx platform
    tests:
    - not_null
    - relationships:
        to: ref('int__openedx_mitxpro__users')
        field: user_id
  - name: courserun_readable_id
    description: str, Open edX Course ID formatted as course-v1:{org}+{course code}+{run_tag}
    tests:
    - not_null
  - name: user_username
    description: str, The username of the learner on MIT xPro open edx platform
    tests:
    - not_null
  - name: user_email
    description: str, The email address of the learner on MIT xPro open edx platform
    tests:
    - not_null
  - name: mitxpro_user_id
    description: int, Numerical user ID on MIT xPro application website
    tests:
    - not_null
    - relationships:
        to: ref('int__mitxpro__users')
        field: user_id
  - name: courseactivitiy_visited_once
    description: boolean, indicating that the user visited the course at least once
  - name: courseactivitiy_viewed_half
    description: boolean, indicating that the user viewed at least half of the chapters
      of the course
  - name: courseactivitiy_num_events
    description: int, Number of tracking log events
  - name: courseactivitiy_num_activity_days
    description: int, Number of days with activity from tracking logs
  - name: courseactivitiy_num_progress_check
    description: int, Number of progress check events from tracking logs
  - name: courseactivitiy_num_problem_check
    description: int, Number of problem_check interaction events from tracking logs
  - name: courseactivitiy_num_show_answer
    description: int, Number of show_answer events from tracking logs
  - name: courseactivitiy_num_show_transcript
    description: int, Number of show_transcript video interaction events from tracking
      logs
  - name: courseactivitiy_num_seq_goto
    description: int, Number of sequence_goto navigational events from tracking logs
  - name: courseactivitiy_num_play_video
    description: int, Number of play_video video interaction events from tracking
      logs
  - name: courseactivitiy_num_seek_video
    description: int, Number of seek_video video interaction events from tracking
      logs
  - name: courseactivitiy_num_pause_video
    description: int, Number of pause_video video interaction events from tracking
      logs
  - name: courseactivitiy_num_video_interactions
    description: int, Number of all the video interaction events from tracking log
  - name: courseactivitiy_num_unique_videos_viewed
    description: int, Number of Unique Videos viewed per user within a course
  - name: courseactivitiy_percentage_total_videos_watched
    description: int, Total number of all videos watched per user within a course
  - name: courseactivitiy_average_time_diff_in_sec
    description: float, Average time difference in seconds between consecutive events
      from tracking logs
  - name: courseactivitiy_standard_deviation_in_sec
    description: float, Standard deviation of difference in seconds between consecutive
      events from tracking logs
  - name: courseactivitiy_max_diff_in_sec
    description: float, Maximum difference in seconds between consecutive events from
      tracking logs
  - name: courseactivitiy_num_consecutive_events_used
    description: int, Number of consecutive events used in time difference computations,
      from tracking logs
  - name: courseactivitiy_total_elapsed_time_in_sec
    description: int, Total elapsed time (in seconds) spent by user on this course,
      based on time difference of consecutive events, with 5 min max cutoff, from
      tracking logs
  - name: courseactivitiy_first_event_timestamp
    description: timestamp, timestamp of first event of user from tracking logs
  - name: courseactivitiy_last_event_timestamp
    description: timestamp, timestamp of last event of user from tracking logs
  - name: courserun_title
    description: str, The title of the course run
  tests:
  - dbt_expectations.expect_compound_columns_to_be_unique:
      column_list: ["user_id", "courserun_readable_id"]
