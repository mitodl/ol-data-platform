---
version: 2

models:
- name: int__mitxpro__course_runs
  description: Intermediate model of course runs in MIT xPro.
  columns:
  - name: id
    description: ""
  - name: title
    description: ""
  - name: end_date
    description: ""
  - name: start_date
    description: ""
  - name: courseware_id
    description: ""
  - name: courseware_url_path
    description: ""

- name: int_mitxpro__enrollments
  description: Intermediate model of enrollments in MIT xPro.
  columns:
  - name: id
    description: int, id for enrollment
    tests:
    - not_null
  - name: active
    description: boolean, specifying whether the user is active in this course run
  - name: user_id
    description: int, id for the enrolling user
  - name: created_on
    description: timestamp, specifying when the enrollment happened
  - name: courseware_url_path
    description: str, url for course where the user is enrolled
  - name: course_title
    description: str, title of the course where the user is enrolled
  - name: user_username
    description: str, name chosen by user
  - name: user_email
    description: str, email associated with the user account

- name: int__mitxpro__users
  description: Intermediate model of users in MIT xPro.
  columns:
  - name: user_id
    description: int, unique id assigned to the user
    tests:
    - unique
    - not_null
  - name: user_username
    description: string, username
    tests:
    - unique
    - not_null
  - name: user_full_name
    description: string, full name
    tests:
    - not_null
  - name: user_email
    description: int, email
    tests:
    - unique
    - not_null
  - name: user_joined_on
    description: timestamp, user join timestamp
  - name: user_last_login
    description: timestamp, user last log in
  - name: user_address_country
    description: string, country code for the user's address
    tests:
    - not_null
  tests:
  - equal_rowcount_with_filters:
      compare_model: ref('stg__mitxpro__app__postgres__users_user')
      compare_filter: "user_is_active=true"
