---
version: 2

models:
- name: stg__mitxonline__app__postgres__users_user
  columns:
  - name: user_id
    description: int, sequential ID representing one user in MITx Online
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_username
    description: str, name chosen by user
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_email
    description: str, user email associated with their account
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_is_active
    description: boolean, used to soft delete user accounts
  - name: user_full_name
    description: str, the user's full name
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_joined_on
    description: timestamp, specifying when a user account was initially created
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: user_last_login
    description: timestamp, specifying when a user last logged in
    tests:
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 7
- name: stg__mitxonline__app__postgres__users_legaladdress
  columns:
  - name: user_address_id
    description: int, sequential ID
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_address_country
    description: string, user country code
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_id
    description: int, foreign key to users_user
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_last_name
    description: string, user last name
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: user_first_name
    description: string, user first name
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 5
- name: stg__mitxonline__app__postgres__courses_course
  columns:
  - name: course_id
    description: int, primary key representing a single MITx Online course
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: course_is_live
    description: boolean, indicating whether the course is available to users on user-facing
      website
  - name: course_title
    description: str, title of the course
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: program_id
    description: id, foreign key to courses_program (deprecating)
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: course_readable_id
    description: str, Open edX ID formatted as course-v1:{org}+{course code}
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: position_in_program
    description: int, sequential number indicating the course position in a program
      (deprecating)
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: course_created_on
    description: timestamp, specifying when a course was initially created
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: course_updated_on
    description: timestamp, specifying when a course was most recently updated
    tests:
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 8
- name: stg__mitxonline__app__postgres__courses_program
  columns:
  - name: program_id
    description: int, primary key representing a single MITx Online program
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: program_is_live
    description: boolean, indicating whether the program is available to users
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: program_title
    description: str, title of the program
    tests:
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: program_readable_id
    description: str, Open edX ID formatted as program-v1:{org}+{program code}
    tests:
    - unique
    - not_null
    - dbt_expectations.expect_column_to_exist
  - name: program_created_on
    description: timestamp, specifying when a program was initially created
    tests:
    - dbt_expectations.expect_column_to_exist
  - name: program_updated_on
    description: timestamp, specifying when a program was most recently updated
    tests:
    - dbt_expectations.expect_column_to_exist
  tests:
  - dbt_expectations.expect_table_column_count_to_equal:
      value: 6

- name: stg__mitxonline__app__postgres__courses_courserun
  columns:
  - name: courserun_id
    description: int, primary key representing a single MITx Online course run
    tests:
    - unique
    - not_null
  - name: courserun_is_live
    description: boolean, indicating whether the course is available to users
  - name: courserun_title
    description: str, title of the course run
    tests:
    - not_null
  - name: courserun_tag
    description: str, A string identifying the set of runs that this run belongs to.
      E.g. 1T2022
    tests:
    - not_null
  - name: course_id
    description: int, foreign key to courses_course representing a single MITx Online
      course
    tests:
    - not_null
  - name: courserun_readable_id
    description: str, Open edX Course ID formatted as course-v1:{org}+{course code}+{run_tag}
    tests:
    - unique
    - not_null
  - name: courserun_url
    description: str, url location for the course run in MITx Online
  - name: courserun_is_self_paced
    description: boolean, indicating whether users can take this course at their own
      pace and earn certificate at any time
  - name: courserun_start_on
    description: timestamp, specifying when the course begins
  - name: courserun_end_on
    description: timestamp, specifying when the course ends
  - name: courserun_enrollment_start_on
    description: timestamp, specifying when enrollment starts
  - name: courserun_enrollment_end_on
    description: timestamp, specifying when enrollment ends
  - name: courserun_expired_on
    description: timestamp, specifying the date time beyond which users should not
      see link to this course run on their dashboard
  - name: courserun_upgrade_deadline
    description: timestamp, specifying the date time beyond which users can not enroll
      in paid course mode
  - name: courserun_created_on
    description: timestamp, specifying when a course run was initially created
  - name: courserun_updated_on
    description: timestamp, specifying when a course run was most recently updated
