---
version: 2

sources:
- name: ol_warehouse_raw_data
  loader: airbyte
  database: 'ol_data_lake_{{ target.name }}'
  schema: 'ol_warehouse_{{ target.name }}_raw'
  tables:
  - name: raw__mitxonline__app__postgres__courses_courserunenrollment
    columns:
    - name: id
      description: int, sequential ID tracking a single user enrollment
    - name: active
      description: str, boolean describing whether the enrollment is active
    - name: run_id
      description: int, unique ID specifying a "run" of an MITx Online course
    - name: user_id
      description: int, unique ID for each user on the MITx Online platform
    - name: created_on
      description: timestamp, specifying when an enrollment was initially created
    - name: updated_on
      description: timestamp, specifying when an enrollment was most recently updated
  - name: raw__mitxonline__app__postgres__courses_courserun
    columns:
    - name: id
      description: int, primary key representing a single MITx Online course run
    - name: live
      description: boolean, indicating whether the course is available to users
    - name: title
      description: str, title of the course run
    - name: run_tag
      description: str, A string identifying the set of runs that this run belongs
        to. E.g. 1T2022
    - name: course_id
      description: int, foreign key to courses_course representing a single MITx Online
        course
    - name: courseware_id
      description: str, Open edX Course ID formatted as course-v1:{org}+{course code}+{run_tag}
    - name: courseware_url_path
      description: str, url location for the course run in MITx Online
    - name: is_self_paced
      description: boolean, indicating whether users can take this course at their
        own pace and earn certificate at any time
    - name: end_date
      description: timestamp, specifying when the course ends
    - name: start_date
      description: timestamp, specifying when the course begins
    - name: enrollment_start
      description: timestamp, specifying when enrollment starts
    - name: enrollment_end
      description: timestamp, specifying when enrollment ends
    - name: expiration_date
      description: timestamp, specifying the date time beyond which users should not
        see link to this course run on their dashboard
    - name: upgrade_deadline
      description: timestamp, specifying the date time beyond which users can not
        enroll in paid course mode
    - name: created_on
      description: timestamp, specifying when a course run was initially created
    - name: updated_on
      description: timestamp, specifying when a course run was most recently updated
  - name: raw__mitxonline__app__postgres__users_user
    columns:
    - name: id
      description: int, sequential ID representing one user in MITx Online
    - name: username
      description: str, name chosen by user
    - name: email
      description: str, user email associated with their account
    - name: name
      description: str, the user's full name
    - name: is_active
      description: boolean, used to soft delete users
    - name: created_on
      description: timestamp, specifying when a user account was initially created
    - name: updated_on
      description: timestamp, specifying when a user account was most recently updated
    - name: last_login
      description: timestamp, user's last login
  - name: raw__mitxonline__app__postgres__courses_course
    columns:
    - name: id
      description: int, primary key representing a single MITx Online course
    - name: live
      description: boolean, indicating whether the course is available to users on
        user-facing website
    - name: title
      description: str, title of the course
    - name: program_id
      description: id, foreign key to courses_program (deprecating)
    - name: readable_id
      description: str, Open edX ID formatted as course-v1:{org}+{course code}
    - name: position_in_program
      description: int, sequential number indicating the course position in a program
        (deprecating)
    - name: created_on
      description: timestamp, specifying when a course was initially created
    - name: updated_on
      description: timestamp, specifying when a course was most recently updated
  - name: raw__mitxonline__app__postgres__users_legaladdress
    columns:
    - name: id
      description: int, primary key for table
    - name: country
      description: string, user country code
    - name: user_id
      description: int, foreign key to users_user
    - name: last_name
      description: string, user last name
    - name: created_on
      description: timestamp, when the record was created
    - name: first_name
      description: string, user first name
    - name: updated_on
      description: timestamp, when the record was updated
  - name: raw__mitxonline__app__postgres__courses_program
    columns:
    - name: id
      description: int, primary key representing a single MITx Online program
    - name: live
      description: boolean, indicating whether the program is available to users
    - name: title
      description: str, title of the program
    - name: readable_id
      description: str, Open edX ID formatted as program-v1:{org}+{program code}
    - name: created_on
      description: timestamp, specifying when a program was initially created
    - name: updated_on
      description: timestamp, specifying when a program was most recently updated
  - name: raw__mitxonline__app__postgres__courses_coursetopic
    columns:
    - name: id
      description: int, primary key representing a single MITx Online course topic
    - name: title
      description: str, name of a course topic
    - name: created_on
      description: timestamp, specifying when a course topic was initially created
    - name: updated_on
      description: timestamp, specifying when a course topic was most recently updated
  - name: raw__mitxonline__app__postgres__courses_course_topics
    columns:
    - name: id
      description: int, primary key representing a single MITx Online course tagged
        to a topic
    - name: course_id
      description: int, foreign key to courses_course representing a single course
    - name: coursetopic_id
      description: int, foreign key to courses_coursetopic representing a single course
        topic
  - name: raw__mitxonline__app__postgres__courses_blockedcountry
    columns:
    - name: id
      description: int, primary key for courses_blockedcountry table from MITx Online
    - name: country
      description: str, two-letter code of the blocked country for a course
    - name: course_id
      description: int, foreign key to courses_course representing a single course
    - name: created_on
      description: timestamp, specifying when a blocked country record was initially
        created
    - name: updated_on
      description: timestamp, specifying when a blocked country record was most recently
        updated
