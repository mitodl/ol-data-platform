---
version: 2

sources:
- name: ol_warehouse_raw_data
  loader: airbyte
  database: 'ol_data_lake_{{ target.name }}'
  schema: 'ol_warehouse_{{ target.name }}_raw'
  tables:
  - name: raw__irx__edxorg__bigquery__mitx_course
    description: MITx courses metadata provided by IR
    columns:
    - name: course_id
      description: str, The canonical ID of the course in the format as {org}/{course}/{run}.
        Note that this is old format as IR converts any new format (course-v1:{org}+{course}+{run})
        into old ones
    - name: course_title
      description: str, The title of the course
    - name: url
      description: str, The url path of the course
    - name: course_number
      description: str, The MIT course number for this course e.g. SysEngx1 is the
        course number for MITxPRO/SysEngx1/1T2018
    - name: course_key_version
      description: str, version number of course key. e.g. v1
    - name: semester
      description: str, The semester during which the course was launched e.g Fall
        2020
    - name: course_launch
      description: date, The date on which the course launches
    - name: course_wrap
      description: date, The date on which the course wraps up
    - name: institution
      description: str, The institution that is linked to the course
    - name: content_type
      description: str, indicate whether this is Course, Exam, Residential, Other
        or blank
    - name: modules
      description: str
    - name: report_year
      description: int, currently single digit
    - name: finance_year
      description: int, finance year
    - name: instructors
      description: str, List of instructors associated with the course
    - name: faculty_kerberos
      description: str, A list of kerberos usernames of the faculty associated with
        the course
    - name: nchapters
      description: int, Number of chapters/modules in the course
    - name: visible_nchapters
      description: int
    - name: tags
      description: str, Tags associated with the course
    - name: new_or_rerun
      description: str, Indicator whether the course is new or a re-run
    - name: registration_open
      description: date, registration open date for the course
    - name: short_title
      description: str, short title of the course
    - name: subject_short_title
      description: str, short title for the course subject
    - name: clean_course_number
      description: str
    - name: self_paced
      description: int, Indicate whether or not the course is self paced e.g 1 or
        blank
    - name: micromasters_description
      description: str, The MicroMasters indicator of the course (if applicable) e.g.
        DEDP
    - name: _4_way_category_by_name
      description: str
    - name: new_4_way
      description: str
    - name: mit_content
      description: int
    - name: phase
      description: str
    - name: sheetorder
      description: int
    - name: sheetorder2
      description: int
    - name: andrews_short_title
      description: str

  - name: raw__irx__edxorg__bigquery__mitx_person_course
    description: canonical datasets that tracks both user activities and certain demographics
    columns:
    - name: course_id
      description: str, The canonical ID of the course in the format as {org}/{course
        number}/{semester}. Note that this is old format as IR converts any new format
        (course-v1:{org}+{course}+{run}) into old ones
    - name: user_id
      description: int, Numerical user ID of a learner on the edX platform
    - name: username
      description: str, username of a learner on the edX platform
    - name: registered
      description: boolean, indicating that the user registered in the course (obsolete
        - should always be true)
    - name: viewed
      description: boolean, indicating that the user visited the course at least once
    - name: explored
      description: boolean, indicating that the user viewed at least half of the chapters
        of the course
    - name: completed
      description: boolean, indicating that the user completed the course with a passing
        grade
    - name: loe
      description: str, user's Level of education in one of "p", "m" , "b", "a", "hs",
        "jhs", "el" "p_se", "p_oth", blank or null. blank means User did not specify
        level of education. Null means this student signed up before this information
        was collected
    - name: yob
      description: int, user's Year of birth
    - name: gender
      description: str, gender, one of "m", "f", "o", blank or NULL. blank means User
        did not specify a gender. Null means this student signed up before this information
        was collected
    - name: profile_country
      description: str, two-letter country code as specified by user in their profile
        (only available after ~mid-2014)
    - name: start_time
      description: timestamp, timestamp of user's enrollment in the course
    - name: verified_enroll_time
      description: timestamp, timestamp on when user initially had their first id-verified
        enrollment event
    - name: verified_unenroll_time
      description: timestamp, timestamp on when user had their last id-verified unenrollment
        event, if any. Null if there were no unenrollment events
    - name: mode
      description: str, enrollment mode, e.g. honor, audit, verified
    - name: is_active
      description: int, indicating if enrollment is active or not (1 or 0)
    - name: grade
      description: float, Final grade user earned in the course, (range between 0.0
        to 1.0)
    - name: passing_grade
      description: float, Passing grade for the course, (range between 0.0 to 1.0)
    - name: cert_created_date
      description: timestamp, timestamp when certificate was generated (if applicable)
    - name: cert_modified_date
      description: timestamp, timestamp when certificate was modified (if applicable)
    - name: cert_status
      description: str, one of downloadable, notpassing, audit_passing, unavailable,
        audit_notpassing where downloadable should = earned
    - name: certified
      description: boolean, indicating that the user earned a certificate in the course
    - name: ip
      description: str, Modal value of the IP address from which this user connected,
        from tracking logs
    - name: postalcode
      description: str, Postal code corresponding to modal IP address
    - name: cc_by_ip
      description: str, Two-letter country code corresponding to the modal IP address
    - name: countrylabel
      description: str, Full name of country corresponding to modal IP address
    - name: continent
      description: str, Full name of continent corresponding to modal IP address
    - name: city
      description: str, Full name of city corresponding to modal IP address
    - name: region
      description: str, Two-Letter code of region or U.S. State corresponding to modal
        IP address
    - name: subdivision
      description: str, Full name of region/subdivision or U.S. State corresponding
        to modal IP address
    - name: un_major_region
      description: str, UN defined sub-continent major geographic regions corresponding
        to modal IP address
    - name: un_economic_group
      description: str, UN defined major geographical economic groups (developing
        and developed nations) corresponding to modal IP address
    - name: un_developing_nation
      description: str, UN defined developing nation groups files corresponding to
        modal IP address
    - name: un_special_region
      description: str, Special Regions corresponding to modal IP address (Latin America
        and the Caribbean, Sub-Saharan-Africa)
    - name: latitude
      description: str, Latitude of city corresponding to modal IP address
    - name: longitude
      description: str, Longitude of city corresponding to modal IP address
    - name: modal_agent
      description: str, Most frequently used method of accessing course materials
        (mobile or desktop)
    - name: ever_mobile
      description: int, indicating if user has ever accessed course materials using
        a mobile browser or app (0 or 1)
    - name: ever_desktop
      description: int, indicating if user has ever accessed course materials using
        a desktop browser (0 or 1)
    - name: first_event
      description: timestamp, timestamp of first event of user from tracking logs
    - name: last_event
      description: timestamp, timestamp of last event of user from tracking logs
    - name: nevents
      description: int, Number of tracking log events
    - name: ndays_act
      description: int, Number of days with activity from tracking logs
    - name: nplay_video
      description: int, Number of video play events from tracking logs
    - name: nchapters
      description: int, Number of chapters visited by the user
    - name: nforum_posts
      description: int, Number of forum posts and comments made by user
    - name: nforum_votes
      description: int, Number of votes received by user's forum posts
    - name: nforum_endorsed
      description: int, Number of endorsed forum posts by user
    - name: nforum_threads
      description: int, Number of forum post threads by user
    - name: nforum_comments
      description: int, Number of forum post comments by user
    - name: nforum_pinned
      description: int, Number of forum posts by user which were pinned (good indicator
        of staff)
    - name: roles
      description: str, One of 3 values, 'Student', Staff' or null null means that
        user does not have course role or discussion forum role assigned from edX
        data
    - name: nprogcheck
      description: int, Number of progress check events from tracking logs
    - name: nproblem_check
      description: int, Number of problem check events from tracking logs
    - name: nforum_events
      description: int, Number of all kinds of forum events from tracking logs
    - name: y1_anomalous
      description: int, indicate if this user was anomalously missing and had to be
        side-loaded from mongo then this field = 1, else null
    - name: email_domain
      description: str, domain of the email address of the user, i.e. what appears
        after the '@'
    - name: language
      description: str, modal transcript language
    - name: language_download
      description: int, modal transcript language download for any video
    - name: language_nevents
      description: int, modal transcript language events
    - name: language_ndiff
      description: int, count of different transcript languages
    - name: ntranscript
      description: int, Number of video transcript events from tracking logs
    - name: nshow_answer
      description: int, Number of show answer events from tracking logs
    - name: nvideo
      description: int, Number of video events (of all kinds) from tracking logs
    - name: nvideos_unique_viewed
      description: int, Number of unique Videos viewed per user within a course
    - name: nvideos_total_watched
      description: float, Total percentage of all videos watched per user within a
        course
    - name: nseq_goto
      description: int, Number of 'sequence goto' navigational events from tracking
        logs
    - name: nseek_video
      description: int, Number of 'video seek' events from tracking logs
    - name: npause_video
      description: int, Number of 'video pause' events from tracking logs
    - name: avg_dt
      description: float, Average time difference in seconds between consecutive events
        from tracking logs
    - name: sdv_dt
      description: float, Standard deviation of difference in seconds between consecutive
        events from tracking logs
    - name: max_dt
      description: float, Maximum difference in seconds between consecutive events
        from tracking logs
    - name: n_dt
      description: float, Number of consecutive events used in time difference computations
        from tracking logs
    - name: sum_dt
      description: float, Total elapsed time (in seconds) spent by user on this course,
        based on time difference of consecutive events, with 5 min max cutoff, from
        tracking logs
    - name: roles_isbetatester
      description: int, indicating if user is a course beta tester (1 or null) null
        means user does not have course role assigned
    - name: roles_isinstructor
      description: int, indicating if user is a course instructor (1 or null) null
        means user does not have course role assigned
    - name: roles_isstaff
      description: int, indicating if user is course staff (1 or null) null means
        user does not have course role assigned
    - name: roles_isccx
      description: int, indicating if user is ccx coach (1 or null) null means user
        does not have course role assigned
    - name: roles_issales
      description: int, indicating if user is sales (1 or null) null means user does
        not have course role assigned
    - name: roles_isfinance
      description: int, indicating if user is finance admin (1 or null) null means
        user does not have course role assigned
    - name: roles_islibrary
      description: int, indicating if user is library user (1 or null) null means
        user does not have course role assigned
    - name: forumroles_isadmin
      description: int, indicating if user is forum admin (1 or null) null means user
        does not have a discussion forum role assigned
    - name: forumroles_iscommunityta
      description: int, indicating if user is a community TA (1 or null) null means
        user does not have a discussion forum role assigned
    - name: forumroles_ismoderator
      description: int, indicating if user is a forum moderator (1 or null) null means
        user does not have a discussion forum role assigned
    - name: forumroles_isstudent
      description: int, indicating if user is a student on the forum (1 or null) null
        means user does not have a discussion forum role assigned

  - name: raw__irx__edxorg__bigquery__mitx_user_info_combo
    description: source table contains edxorg user profile, enrollments and certificate
      details in a course from IRx BigQuery, but enrollment_course_id in this table
      is not always populated.
    columns:
    - name: user_id
      description: int, Numerical user ID of a learner on the edX platform (not unique)
    - name: username
      description: str, The username of the learner on the edX platform (not unique)
    - name: email
      description: str, The email address of the learner on the edX platform
    - name: id_map_hash_id
      description: str, A hashed ID mapping learner user ID's to external systems
    - name: is_staff
      description: int, Whether the user is a staff member of edx, 1 indicates staff
        member
    - name: profile_language
      description: str, Language selected by the user as their default profile language
        (No longer used) History - User’s preferred language, asked during the sign
        up process for the 6.002x prototype course given in the Spring of 2012. Sometimes
        written in those languages. EdX stopped collecting this data after MITx transitioned
        to edX, but never removed the values for the first group of students.
    - name: profile_location
      description: str, location chosen by the user on their profile (No longer used)
        History- User’s location, asked during the sign up process for the 6.002x
        prototype course given in the Spring of 2012. edX stopped collecting this
        column after MITx transitioned to edX, so it is only available for the first
        batch of students.
    - name: profile_name
      description: str, The full name of the user on the edX platform
    - name: profile_mailing_address
      description: str, Mailing address provided by the learner on their profile
    - name: profile_allow_certificate
      description: int, Whether or not the profile allows certificate (No longer used)
        History - Prior to 10 Feb 2014, this field was set to 0 (false) if log analysis
        revealed that the student was accessing the edX site from a country that the
        U.S. had embargoed. This restriction is no longer in effect.
    - name: profile_goals
      description: str, The intended goals of the learner provided on their profile
    - name: profile_gender
      description: str, Gender selected by the user on their profile
    - name: profile_country
      description: str, Country selected by the learner on their profile
    - name: profile_level_of_education
      description: str, user's Level of education- blank means User did not specify
        level of education. Null means this student signed up before this information
        was collected
    - name: profile_year_of_birth
      description: int, A year of birth provided by the learner on their profile
    - name: profile_meta
      description: str, extra metadata on learner's profile. JSON data in text field
    - name: profile_courseware
      description: str, The courseware under which the profile was created History
        - At one point, it was part of a way to do A/B tests, but it has not been
        used for anything meaningful since the conclusion of the prototype course
        in the spring of 2012.
    - name: profile_city
      description: str, City selected the learner on their profile (Not currently
        used) History - Added in Jan 2014, not yet implemented.
    - name: date_joined
      description: timestamp, timestamp that the account was created.
    - name: last_login
      description: timestamp, Timestamp indicating the last time the user logged into
        the edX platform
    - name: enrollment_course_id
      description: str, course ID user is enrolling in. It's in the format as org/number/semester
    - name: enrollment_mode
      description: str, indicate what kind of enrollment it is - mode, no-id-professional,
        audit, honor, verified, professional, credit
    - name: enrollment_created
      description: timestamp, Timestamp indicating when the enrollment event was created
    - name: enrollment_is_active
      description: int, Whether or not the enrollment is active. 1 means active
    - name: certificate_id
      description: int, The ID of the certificate obtained by the user. Null if the
        user obtained no certificate.
    - name: certificate_course_id
      description: str, The course ID associated with the certificate. It's in the
        format as org/number/semester
    - name: certificate_user_id
      description: int, The user ID tied to the certificate
    - name: certificate_mode
      description: str, The enrollment mode associated with the certificate
    - name: certificate_distinction
      description: int, This was used for letters of distinction for 188.1x, but is
        not being used for any current courses
    - name: certificate_created_date
      description: timestamp, Timestamp indicating when the certificate was created
    - name: certificate_modified_date
      description: timestamp, Timestamp indicating the last time the certificate was
        modified
    - name: certificate_name
      description: str, The name of the user that is listed on the certificate
    - name: certificate_key
      description: str, A random string that is used to match server requests to responses
        sent to the LMS. Used internally only
    - name: certificate_status
      description: str, Status of the generation of the certificate
    - name: certificate_download_url
      description: str, the full URL to the certificate
    - name: certificate_download_uuid
      description: str, A hash code that identifies this student’s certificate. Included
        as part of the download_url.
    - name: certificate_verify_uuid
      description: str, A hash code that verifies the validity of a certificate. Included
        on the certificate itself as part of a URL.
    - name: certificate_grade
      description: float, The grade when the certificate was generated
    - name: certificate_error_reason
      description: str, indicate any errors encountered during certificate generation.
        Used internally only.
    - name: edxinstructordash_grade
      description: float, A grade downloaded separately from the instructor dashboards.
        This is mostly null for all tables generated by the simeon CLI tool version
        0.0.1
    - name: edxinstructordash_grade_timestamp
      description: str, Timestamp indicating when the grades from the instructor dashboards
        were generated
    - name: y1_anomalous
      description: int, relic from processes that the edx2bigquery package used to
        handle

  - name: raw__irx__edxorg__bigquery__email_opt_in
    description: It contains email opt-in preferences for every user on every course
      they enroll in. If users enroll in multiple courses, the email and username
      in this table are the most recent data
    columns:
    - name: course_id
      description: str, The canonical ID of the course in the format as {org}/{course}/{run}.
    - name: user_id
      description: int, Numerical user ID of a learner on the edX platform
    - name: username
      description: str, username of a learner on the edX platform
    - name: email
      description: str, The email address of the learner on the edX platform
    - name: full_name
      description: str, The full name of the user on the edX platform
    - name: is_opted_in_for_email
      description: boolean, indicating if the learner has opted to receive marketing
        emails
    - name: preference_set_datetime
      description: timestamp, specifying when email opt in preference was most recently
        updated
