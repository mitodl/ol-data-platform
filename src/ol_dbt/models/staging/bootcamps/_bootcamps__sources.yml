---
version: 2

sources:
- name: ol_warehouse_raw_data
  loader: airbyte
  database: 'ol_data_lake_{{ target.name }}'
  schema: 'ol_warehouse_{{ target.name }}_raw'
  tables:
  - name: raw__bootcamps__app__postgres__ecommerce_wiretransferreceipt
    description: Data about a wire transfer
    columns:
    - name: id
      description: int, primary key representing a  wire transfer receipt
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when the wire transfer receipt was initially
        created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when the wire transfer receipt was most recently
        updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: data
      description: json, data for a payment
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: order_id
      description: int, primary key in ecommerce_order
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: wire_transfer_id
      description: int, unique id used to identify the wire transfer in the spreadsheet
        we use to import wire transfer data
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 6
  - name: raw__bootcamps__app__postgres__ecommerce_receipt
    description: Data returned from cybersource when a user pays for an order through
      cybersource
    columns:
    - name: id
      description: int, primary key representing a receipt
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when the receipt was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when the receipt was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: data
      description: json, cybersource data for a payment
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: order_id
      description: int, primary key in ecommerce_order
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 5
  - name: raw__bootcamps__app__postgres__ecommerce_line
    columns:
    - name: id
      description: int, primary key representing an ecommerce line
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when the line was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when the line was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: price
      description: numeric, price paid for the bootcamp run
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: description
      description: string, description of the purchased bootcamp run
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: order_id
      description: int, foreign key for the order this line belongs to
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: bootcamp_run_id
      description: int, foreign key in courses_courserun of the purchased run
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 7
  - name: raw__bootcamps__app__postgres__ecommerce_orderaudit
    columns:
    - name: id
      description: int, primary key representing a change to the orders table
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when the order audit was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when the order audit was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: data_before
      description: json, jsonified order object before the change
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: data_after
      description: json, jsonified order object after the change
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: acting_user_id
      description: int, reference to auth_user table, the user who made the change
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: order_id
      description: int, reference to ecommerce_order
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 7
  - name: raw__bootcamps__app__postgres__ecommerce_order
    columns:
    - name: id
      description: int, primary key representing a single bootcamps order
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when the order was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when the order was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: status
      description: string, order state. Options are "fulfilled", "failed" "created",
        "refunded"
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: total_price_paid
      description: number, total order amount
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: user_id
      description: int, primary key in auth_user for the purchaser
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: payment_type
      description: string, payment type for the order. One of "cybersource", "wiretransfer",
        "refund"
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: application_id
      description: int, primary key in applications_bootcampapplication for the application
        the order is associated with
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 8
  - name: raw__bootcamps__app__postgres__klasses_bootcamprunenrollment
    description: ""
    columns:
    - name: id
      description: int, sequential ID tracking a single user enrollment
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: active
      description: boolean, indicating whether the user is still enrolled in the bootcamp
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: user_id
      description: int, unique ID for each bootcamps user
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when an enrollment was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when an enrollment was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: change_status
      description: str, enrollment status for users whose enrollment is no longer
        active. Options are 'deferred', 'refunded'
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: bootcamp_run_id
      description: int, unique ID specifying a "run" of an bootcamp
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: novoed_sync_date
      description: timestamp, indicates the last time when the data was synced with
        novoed for courses hosted on novoed
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: user_certificate_is_blocked
      description: boolean, flag indicating that a new certificate should not be generated
        for the enrollment
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 9

  - name: raw__bootcamps__app__postgres__klasses_bootcamp
    columns:
    - name: id
      description: int, primary key representing a single bootcamp course
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: title
      description: str, title of the bootcamp course
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: legacy
      description: boolean, used to distinguish the older bootcamp courses from the
        newer ones
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 3

  - name: raw__bootcamps__app__postgres__klasses_bootcamprun
    columns:
    - name: id
      description: int, primary key representing a single bootcamp course run
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: bootcamp_id
      description: int, foreign key to klasses_bootcamp representing a single bootcamp
        course
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: title
      description: str, title of the bootcamp course run
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: run_key
      description: int, numeric key assigned to bootcamp course run (not necessarily
        unique by itself)
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: source
      description: str, indicating if applications were from SMApply or FluidRev (those
        two sources are deprecated)
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: start_date
      description: timestamp, specifying when the course run begins
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: end_date
      description: timestamp, specifying when the course run ends
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: bootcamp_run_id
      description: str, unique string to identify a bootcamp course run (it could
        be blank for older runs)
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: allows_skipped_steps
      description: boolean, indicating if this course run allows users to skip application
        steps
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: novoed_course_stub
      description: str, unique identifier for NovoEd course (it's primarily used for
        API call to NovoEd)
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 10

  - name: raw__bootcamps__app__postgres__auth_user
    description: ""
    columns:
    - name: id
      description: int, sequential ID representing one user
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: password
      description: str, hashed password
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: last_login
      description: timestamp, user's last login
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: is_superuser
      description: boolean, used for app permissions
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: username
      description: str, chosen by the user
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: first_name
      description: str, currently blank for all users on production
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: last_name
      description: str, currently blank for all users on production
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: email
      description: str, user email associated with their account
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: is_staff
      description: boolean, used for app permissions
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: is_active
      description: boolean, used to soft delete users
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: date_joined
      description: timestamp, specifying when a user account was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 11


  - name: raw__bootcamps__app__postgres__profiles_legaladdress
    columns:
    - name: id
      description: int, primary key for table
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: country
      description: string, user country code
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: user_id
      description: int, foreign key to users_user
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, when the record was created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, when the record was last updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: first_name
      description: string, user first name
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: last_name
      description: string, user last name
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: street_address_1
      description: string, first line of street address
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: street_address_2
      description: string, second line of street address
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: street_address_3
      description: string, third line of street address
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: street_address_4
      description: string, fourth line of street address
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: street_address_5
      description: string, fifth line of street address
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: city
      description: string, city
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: state_or_territory
      description: string, state or territory
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: postal_code
      description: string, postal code
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 15
  - name: raw__bootcamps__app__postgres__profiles_profile
    columns:
    - name: id
      description: int, sequential ID
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: name
      description: str, the user's full name
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when the row was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when the row was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: fluidreview_id
      description: int, forign id for users who applied through fluidreview, null
        for all users created after June 2019
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: smapply_id
      description: int, forign id for users who applied through smapply, null for
        all users created after May 2020
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: smapply_user_data
      description: json, dict of user data for users who applied through smapply
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: smapply_demographic_data
      description: json, dict of demographic data for users who applied through smapply
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: birth_year
      description: int, user birth year
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: company
      description: str, user company
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: company_size
      description: int, encodes company size choices are 1 - "Small/Start-up (1+ employees)",
        9 - "Small/Home office (1-9 employees)", 99 - "Small (10-99 employees)", 999
        - "Small to medium-sized (100-999 employees)", 9999 - "Medium-sized (1000-9999
        employees)", 10000 - "Large Enterprise (10,000+ employees)", 0 - "Other (N/A
        or Don't know)" may be null
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: gender
      description: str, one of  "m", "f" or "o" to encode "Male" , "Female", "Other/Prefer
        not to say". May be blank
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: job_title
      description: str, user job title
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: industry
      description: str, user job industry
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: job_function
      description: str, user job function
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: years_experience
      description: int, encodes user years experience choices are; 2 - "Less than
        2 years", 5 - "2-5 years", 10 - "6 - 10 years", 15 - "11 - 15 years", 20 -
        "16 - 20 years", 21 - "More than 20 years", 0 - "Prefer not to say", may be
        null
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: user_id
      description: int, unique ID for each user on the bootcamps platform
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: highest_education
      description: str, choices are "Doctorate", "Master's or professional degree",
        "Bachelor's degree", "Associate degree", "Secondary/high school", "Junior
        secondary/junior high/middle school", "Elementary/primary school", "No formal
        education", "Other education"
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: can_skip_application_steps
      description: boolean, allows users to be accepted into a bootcamp without completing
        all application steps
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 19

  - name: raw__bootcamps__app__postgres__klasses_bootcampruncertificate
    columns:
    - name: id
      description: int, primary key representing a single Bootcamps course certificate
        record
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: uuid
      description: str, unique identifier for the certificate
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: bootcamp_run_id
      description: int, foreign key to klasses_bootcamprun representing a single course
        run
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: user_id
      description: str, foreign key to auth_user representing a single user
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: created_on
      description: timestamp, specifying when a certificate was initially created
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: updated_on
      description: timestamp, specifying when a certificate was most recently updated
      tests:
      - dbt_expectations.expect_column_to_exist
    - name: is_revoked
      description: boolean, indicating whether the certificate is revoked and invalid
      tests:
      - dbt_expectations.expect_column_to_exist
    tests:
    - dbt_expectations.expect_table_column_count_to_equal:
        value: 7
